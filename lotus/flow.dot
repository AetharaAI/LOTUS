digraph LotusFlow {
    rankdir=LR;
    node [shape=box, style=filled];
    Nucleus [fillcolor=lightblue];
    perception [fillcolor=lightgreen, label="perception\nType: core"];
    Nucleus -> perception;
    memory [fillcolor=lightgreen, label="memory\nType: core"];
    Nucleus -> memory;
    reasoning [fillcolor=lightgreen, label="reasoning\nType: core"];
    Nucleus -> reasoning;
    providers [fillcolor=lightgreen, label="providers\nType: core"];
    Nucleus -> providers;
    PubSub_system_ready [shape=ellipse, fillcolor=pink, label="system.ready"];
    perception -> PubSub_system_ready [style=dotted, label="sub"];
    memory -> PubSub_system_ready [style=dotted, label="sub"];
    providers -> PubSub_system_ready [style=dotted, label="sub"];
    PubSub_perception_start_watching [shape=ellipse, fillcolor=pink, label="perception.start_watching"];
    perception -> PubSub_perception_start_watching [style=dotted, label="sub"];
    PubSub_perception_stop_watching [shape=ellipse, fillcolor=pink, label="perception.stop_watching"];
    perception -> PubSub_perception_stop_watching [style=dotted, label="sub"];
    PubSub_system_shutdown [shape=ellipse, fillcolor=pink, label="system.shutdown"];
    perception -> PubSub_system_shutdown [style=dotted, label="sub"];
    memory -> PubSub_system_shutdown [style=dotted, label="sub"];
    PubSub_memory_store [shape=ellipse, fillcolor=pink, label="memory.store"];
    memory -> PubSub_memory_store [style=dotted, label="sub"];
    PubSub_memory_retrieve [shape=ellipse, fillcolor=pink, label="memory.retrieve"];
    memory -> PubSub_memory_retrieve [style=dotted, label="sub"];
    PubSub_memory_search [shape=ellipse, fillcolor=pink, label="memory.search"];
    memory -> PubSub_memory_search [style=dotted, label="sub"];
    PubSub_perception_user_input [shape=ellipse, fillcolor=pink, label="perception.user_input"];
    reasoning -> PubSub_perception_user_input [style=dotted, label="sub"];
    PubSub_perception_voice_input [shape=ellipse, fillcolor=pink, label="perception.voice_input"];
    reasoning -> PubSub_perception_voice_input [style=dotted, label="sub"];
    PubSub_action_tool_result [shape=ellipse, fillcolor=pink, label="action.tool_result"];
    reasoning -> PubSub_action_tool_result [style=dotted, label="sub"];
    PubSub_cognition_delegation_result [shape=ellipse, fillcolor=pink, label="cognition.delegation_result"];
    reasoning -> PubSub_cognition_delegation_result [style=dotted, label="sub"];
    PubSub_llm_complete [shape=ellipse, fillcolor=pink, label="llm.complete"];
    providers -> PubSub_llm_complete [style=dotted, label="sub"];
    PubSub_llm_stream [shape=ellipse, fillcolor=pink, label="llm.stream"];
    providers -> PubSub_llm_stream [style=dotted, label="sub"];
    PubSub_provider_switch [shape=ellipse, fillcolor=pink, label="provider.switch"];
    providers -> PubSub_provider_switch [style=dotted, label="sub"];
}